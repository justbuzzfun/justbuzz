<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIQUIDITY ORACLE</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; color: #e0e0e0; font-family: 'Syncopate', sans-serif; margin: 0; padding: 20px; text-transform: uppercase; }
        
        .header { border-bottom: 2px solid #583dff; padding-bottom: 20px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: #050505; z-index: 100; }
        .logo { font-size: 28px; font-weight: bold; color: #583dff; text-shadow: 0 0 15px #583dff; }
        .status { font-size: 10px; color: #888; letter-spacing: 2px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }

        .card { background: #0a0a0a; border: 1px solid #222; padding: 20px; border-radius: 12px; position: relative; transition: 0.3s; opacity: 0.7; }
        
        /* PREDICTION STYLES */
        .card.bullish { border: 2px solid #00ff41; box-shadow: 0 0 30px rgba(0, 255, 65, 0.15); opacity: 1; order: -1; }
        .card.bearish { border: 2px solid #ff0055; box-shadow: 0 0 30px rgba(255, 0, 85, 0.15); opacity: 1; order: -1; }

        .header-row { display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; margin-bottom: 15px; }
        
        /* BARS */
        .bar-container { margin-bottom: 15px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 10px; color: #666; margin-bottom: 5px; }
        .progress-bg { height: 8px; background: #222; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; transition: width 1s ease; }
        
        /* SENTIMENT COLORS */
        .fill-long { background: #00ff41; }
        .fill-short { background: #ff0055; }

        .prediction-box { text-align: center; padding: 15px; border-radius: 8px; font-weight: bold; margin-top: 15px; font-size: 14px; letter-spacing: 1px; }
        .bullish .prediction-box { background: rgba(0, 255, 65, 0.1); color: #00ff41; border: 1px solid #00ff41; }
        .bearish .prediction-box { background: rgba(255, 0, 85, 0.1); color: #ff0055; border: 1px solid #ff0055; }

        #loading { text-align: center; margin-top: 100px; color: #583dff; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">üîÆ ORACLE</div>
        <div class="status">CALCULATING NEXT MOVE BASED ON LIQUIDITY POOLS</div>
    </div>

    <div id="loading">SCANNING THE MATRIX...</div>
    <div id="grid" class="grid"></div>

    <script>
        const grid = document.getElementById('grid');
        const loading = document.getElementById('loading');
        // ŸÑ€åÿ≥ÿ™ ÿßÿ±ÿ≤Ÿáÿß€å ŸÖŸáŸÖ (⁄©Ÿá ŸÜŸÇÿØ€åŸÜ⁄Ø€å ÿ®ÿßŸÑÿß ÿØÿßÿ±ŸÜ)
        const pairs = ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'BNBUSDT', 'DOGEUSDT', 'ADAUSDT', 'LINKUSDT', 'MATICUSDT', 'LTCUSDT', 'AVAXUSDT', 'DOTUSDT', 'FILUSDT', 'PNUTUSDT', 'ACTUSDT', '1000PEPEUSDT'];

        async function init() {
            grid.innerHTML = '';
            
            // ÿßÿ≥⁄©ŸÜ ŸÖŸàÿßÿ≤€å ÿ®ÿ±ÿß€å ÿ≥ÿ±ÿπÿ™
            const promises = pairs.map(pair => analyzeLiquidity(pair));
            await Promise.all(promises);

            loading.style.display = 'none';
        }

        async function analyzeLiquidity(symbol) {
            try {
                // ÿØÿ±€åÿßŸÅÿ™ ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿ≠€åÿßÿ™€å: ŸÜÿ≥ÿ®ÿ™ ŸÑÿßŸÜ⁄Ø/ÿ¥Ÿàÿ±ÿ™ ŸÖÿ±ÿØŸÖ (Global) Ÿà ŸÇ€åŸÖÿ™
                const [globalRatioRes, tickerRes, klineRes] = await Promise.all([
                    fetch(`https://fapi.binance.com/futures/data/globalLongShortAccountRatio?symbol=${symbol}&period=5m&limit=1`),
                    fetch(`https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=${symbol}`),
                    fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${symbol}&interval=1h&limit=10`) // ÿ®ÿ±ÿß€å Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿ≥ŸÇŸÅ Ÿà ⁄©ŸÅ ÿßÿÆ€åÿ±
                ]);

                const globalData = await globalRatioRes.json();
                const ticker = await tickerRes.json();
                const klines = await klineRes.json();

                if (!globalData.length) return;

                const longAccount = parseFloat(globalData[0].longAccount); // ÿØÿ±ÿµÿØ ŸÑÿßŸÜ⁄Ø‚Äå⁄Ø€åÿ±Ÿáÿß (ŸÖÿ±ÿØŸÖ)
                const shortAccount = parseFloat(globalData[0].shortAccount); // ÿØÿ±ÿµÿØ ÿ¥Ÿàÿ±ÿ™‚Äå⁄Ø€åÿ±Ÿáÿß
                const price = parseFloat(ticker.lastPrice);
                const change = parseFloat(ticker.priceChangePercent);

                // --- üß† ŸÖÿ∫ÿ≤ ÿßŸàÿ±ÿß⁄©ŸÑ (Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å ÿ≠ÿ±⁄©ÿ™ ÿßŸÑ⁄ØŸàÿ±€åÿ™ŸÖ) ---
                
                let prediction = "NEUTRAL";
                let target = "WAITING...";
                let cardClass = "";
                let confidence = 0;

                // 1. ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸáÿØŸÅ ŸÇ€åŸÖÿ™ (Liquidity Target)
                // Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿ®ÿßŸÑÿßÿ™ÿ±€åŸÜ Ÿà Ÿæÿß€å€åŸÜ‚Äåÿ™ÿ±€åŸÜ ŸÇ€åŸÖÿ™ €±€∞ ÿ≥ÿßÿπÿ™ ⁄Øÿ∞ÿ¥ÿ™Ÿá
                const highs = klines.map(k => parseFloat(k[2]));
                const lows = klines.map(k => parseFloat(k[3]));
                const recentHigh = Math.max(...highs);
                const recentLow = Math.min(...lows);

                // 2. ŸÅÿ±ŸÖŸàŸÑŸê ÿ∂ÿØŸê ÿ™ŸàÿØŸá (Contrarian Logic)
                // ÿß⁄Øÿ± ÿß⁄©ÿ´ÿ± ŸÖÿ±ÿØŸÖ (ÿ®ÿßŸÑÿß€å €∂€∞Ÿ™) ŸÑÿßŸÜ⁄Ø Ÿáÿ≥ÿ™ŸÜ -> ÿßŸÑ⁄ØŸàÿ±€åÿ™ŸÖ ŸÖ€åÿ±€åÿ≤Ÿá ÿ™ÿß ŸÑ€å⁄©Ÿà€å€åÿØ ⁄©ŸÜŸá
                if (longAccount > 60) {
                    prediction = "ü©∏ LIQUIDATION DROP";
                    target = `TARGET: ${recentLow} (LOW POOL)`;
                    cardClass = "bearish";
                    confidence = longAccount; // Ÿáÿ±⁄Ü€å ŸÖÿ±ÿØŸÖ ÿ®€åÿ¥ÿ™ÿ± ÿßÿ¥ÿ™ÿ®ÿßŸá ⁄©ŸÜŸÜÿå ÿßÿ∑ŸÖ€åŸÜÿßŸÜ ŸÖÿß ÿ®€åÿ¥ÿ™ÿ±Ÿá
                }
                // ÿß⁄Øÿ± ÿß⁄©ÿ´ÿ± ŸÖÿ±ÿØŸÖ ÿ¥Ÿàÿ±ÿ™ Ÿáÿ≥ÿ™ŸÜ -> ÿßŸÑ⁄ØŸàÿ±€åÿ™ŸÖ ŸæÿßŸÖŸæ ŸÖ€å⁄©ŸÜŸá (Short Squeeze)
                else if (shortAccount > 60) {
                    prediction = "üöÄ SHORT SQUEEZE";
                    target = `TARGET: ${recentHigh} (HIGH POOL)`;
                    cardClass = "bullish";
                    confidence = shortAccount;
                }

                renderCard(symbol, price, longAccount, shortAccount, prediction, target, cardClass, confidence);

            } catch (e) { console.log(e); }
        }

        function renderCard(symbol, price, longs, shorts, prediction, target, cardClass, confidence) {
            const card = document.createElement('div');
            card.className = `card ${cardClass}`;
            
            // ŸÜŸàÿßÿ± Ÿàÿ∂ÿπ€åÿ™ ŸÖÿ±ÿØŸÖ
            const barColor = longs > shorts ? 'fill-long' : 'fill-short';
            const majority = longs > shorts ? `${longs.toFixed(0)}% BULLS (RETAIL)` : `${shorts.toFixed(0)}% BEARS (RETAIL)`;

            card.innerHTML = `
                <div class="header-row">
                    <span>${symbol.replace('USDT','')}</span>
                    <span>$${price}</span>
                </div>

                <div class="bar-container">
                    <div class="bar-label">
                        <span>CROWD SENTIMENT</span>
                        <span style="color:${longs>shorts?'#00ff41':'#ff0055'}">${majority}</span>
                    </div>
                    <div class="progress-bg">
                        <div class="progress-fill ${barColor}" style="width: ${Math.max(longs, shorts)}%"></div>
                    </div>
                </div>

                <div class="prediction-box">
                    <div>ALGORYTHM NEXT MOVE:</div>
                    <div style="font-size:20px; margin:5px 0;">${prediction}</div>
                    <div style="font-size:10px; color:#888;">${target}</div>
                </div>
            `;
            
            // ÿ≥Ÿàÿ±ÿ™: ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å ÿ®ÿß ÿßÿ∑ŸÖ€åŸÜÿßŸÜ ÿ®ÿßŸÑÿß (ÿ™ÿ∂ÿßÿØ ÿ≤€åÿßÿØ) ÿ®ÿ±ŸÜ ÿ®ÿßŸÑÿß
            if (cardClass !== "") {
                card.style.order = `-${Math.floor(confidence)}`;
            } else {
                card.style.order = "0";
            }

            grid.appendChild(card);
        }

        init();
        setInterval(init, 30000); // ÿ±ŸÅÿ±ÿ¥ Ÿáÿ± €≥€∞ ÿ´ÿßŸÜ€åŸá
    </script>
</body>
</html>
