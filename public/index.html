<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MULTI-COIN SNIPER RADAR</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; color: #ccc; font-family: 'Share Tech Mono', monospace; margin: 0; padding: 20px; overflow-x: hidden; }
        
        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 15px; margin-bottom: 20px; position: sticky; top: 0; background: #050505; z-index: 100; }
        .logo { font-size: 24px; color: #00bcd4; font-weight: bold; letter-spacing: 2px; }
        .status { font-size: 12px; color: #666; }
        
        /* GRID LAYOUT */
        .radar-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
        
        /* COIN CARD */
        .card { background: #111; border: 1px solid #333; border-radius: 8px; padding: 15px; position: relative; transition: all 0.3s; display: flex; flex-direction: column; justify-content: space-between; }
        .card-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .symbol { font-size: 18px; font-weight: bold; color: #fff; }
        .price { font-size: 16px; color: #ddd; }
        
        .indicators { display: flex; justify-content: space-between; font-size: 12px; color: #888; margin-bottom: 10px; }
        .val-high { color: #ff0055; } /* RSI High */
        .val-low { color: #00ff41; } /* RSI Low */
        
        /* SIGNAL STATUS */
        .signal-bar { text-align: center; padding: 8px; border-radius: 4px; font-weight: bold; font-size: 14px; background: #222; color: #555; transition: 0.3s; }
        
        /* ACTIVE SIGNALS */
        .card.buy-active { border: 2px solid #00ff41; box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); order: -1; }
        .card.buy-active .signal-bar { background: #00ff41; color: #000; animation: pulse-green 1s infinite; }
        
        .card.sell-active { border: 2px solid #ff0055; box-shadow: 0 0 20px rgba(255, 0, 85, 0.2); order: -1; }
        .card.sell-active .signal-bar { background: #ff0055; color: #fff; animation: pulse-red 1s infinite; }

        /* LOG PANEL (SIDEBAR) */
        #log-panel { position: fixed; bottom: 20px; right: 20px; width: 300px; height: 200px; background: rgba(0,0,0,0.9); border: 1px solid #444; padding: 10px; overflow-y: auto; font-size: 11px; z-index: 99; border-radius: 5px; display: none; }
        .log-entry { margin-bottom: 5px; border-bottom: 1px dashed #333; padding-bottom: 2px; }
        .log-buy { color: #00ff41; }
        .log-sell { color: #ff0055; }

        @keyframes pulse-green { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        @keyframes pulse-red { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">
        <div>
            <div class="logo">ü¶Ö HUNTER RADAR v2</div>
            <div class="status">SCANNING <span id="coinCount">0</span> ASSETS | TIMEFRAME: 1m (Scalp)</div>
        </div>
        <button onclick="toggleSound()" style="background:#333; color:#fff; border:none; padding:10px; cursor:pointer;">üîä SOUND: ON</button>
    </div>

    <div id="radarGrid" class="radar-grid">
        <!-- Cards will be injected here -->
    </div>

    <div id="log-panel" style="display:block;">
        <div style="font-weight:bold; color:#fff; border-bottom:1px solid #555; margin-bottom:5px;">üö® SIGNAL LOGS</div>
        <div id="logsContent"></div>
    </div>

    <!-- AUDIO -->
    <audio id="alertSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script>
        // --- 1. CONFIGURATION ---
        // ŸÑ€åÿ≥ÿ™ ÿßÿ±ÿ≤Ÿáÿß€å€å ⁄©Ÿá ŸÖ€åÿÆŸàÿß€å ÿßÿ≥⁄©ŸÜ ⁄©ŸÜ€å (ÿ®ÿß ÿ≠ÿ±ŸàŸÅ ⁄©Ÿà⁄Ü⁄©)
        // ŸÜ⁄©ÿ™Ÿá: GME ÿ±Ÿà€å ÿ≥ŸàŸÑÿßŸÜÿß ŸÖŸÖ⁄©ŸÜŸá ÿ™Ÿà ÿ®ÿß€åŸÜŸÜÿ≥ ŸÜÿ®ÿßÿ¥Ÿáÿå ÿß€åŸÜÿ¨ÿß ŸÑ€åÿ≥ÿ™ ÿ®ÿß€åŸÜŸÜÿ≥ ÿ±Ÿà ŸÖ€åÿ∞ÿßÿ±€åŸÖ
        const symbols = [
            'btcusdt', 'ethusdt', 'solusdt', 'bnbusdt', 'xrpusdt', 
            'dogeusdt', 'pepeusdt', 'shibusdt', 'filusdt', // ÿØÿ±ÿÆŸàÿßÿ≥ÿ™€å
            'actusdt', 'pnutusdt', // ÿØÿ±ÿÆŸàÿßÿ≥ÿ™€å (ÿß⁄ØŸá ÿ™Ÿà ÿ®ÿß€åŸÜŸÜÿ≥ ÿ®ÿßÿ¥ŸÜ ⁄©ÿßÿ± ŸÖ€å⁄©ŸÜŸá)
            'linkusdt', 'adausdt', 'avaxusdt', 'maticusdt', 
            'dotusdt', 'ltcusdt', 'nearusdt', 'ftmusdt'
        ];

        document.getElementById('coinCount').innerText = symbols.length;
        let soundEnabled = true;

        // ÿ≠ÿßŸÅÿ∏Ÿá ÿ®ÿ±ÿß€å ÿ∞ÿÆ€åÿ±Ÿá ⁄©ŸÜÿØŸÑ‚ÄåŸáÿß€å Ÿáÿ± ÿßÿ±ÿ≤
        // structure: { 'btcusdt': [close1, close2, ...], ... }
        let coinData = {};
        
        // ÿ≥ÿßÿÆÿ™ ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß ÿØÿ± ÿµŸÅÿ≠Ÿá
        const grid = document.getElementById('radarGrid');
        symbols.forEach(sym => {
            coinData[sym] = []; // ÿ¢ÿ±ÿß€åŸá ÿÆÿßŸÑ€å ÿ®ÿ±ÿß€å ÿØ€åÿ™ÿß
            
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${sym}`;
            card.innerHTML = `
                <div class="card-header">
                    <span class="symbol">${sym.toUpperCase().replace('USDT','')}</span>
                    <span class="price" id="price-${sym}">Loading...</span>
                </div>
                <div class="indicators">
                    <span>RSI: <b id="rsi-${sym}">--</b></span>
                    <span>EMA Dist: <b id="ema-${sym}">--</b>%</span>
                </div>
                <div class="signal-bar" id="sig-${sym}">WAITING DATA...</div>
            `;
            grid.appendChild(card);
        });

        // --- 2. WEBSOCKET CONNECTION ---
        // ÿ≥ÿßÿÆÿ™ ÿ¢ÿØÿ±ÿ≥ ÿßÿ≥ÿ™ÿ±€åŸÖ ÿ™ÿ±⁄©€åÿ®€å (€å⁄© ⁄©ÿßŸÜ⁄©ÿ¥ŸÜ ÿ®ÿ±ÿß€å ŸáŸÖŸá ÿßÿ±ÿ≤Ÿáÿß - ÿ®Ÿá€åŸÜŸá)
        const streams = symbols.map(s => `${s}@kline_1m`).join('/');
        const ws = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${streams}`);

        ws.onopen = () => console.log("Connected to Binance Radar");
        
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            const symbol = data.data.s.toLowerCase(); // e.g. 'btcusdt'
            const kline = data.data.k;
            const closePrice = parseFloat(kline.c);

            // ÿ¢ŸæÿØ€åÿ™ ŸÇ€åŸÖÿ™ ŸÑÿ≠ÿ∏Ÿá‚Äåÿß€å
            document.getElementById(`price-${symbol}`).innerText = closePrice;

            // ŸÅŸÇÿ∑ ŸàŸÇÿ™€å ⁄©ŸÜÿØŸÑ ÿ®ÿ≥ÿ™Ÿá ŸÖ€åÿ¥Ÿá ŸÖÿ≠ÿßÿ≥ÿ®ÿßÿ™ ÿ≥ŸÜ⁄Ø€åŸÜ ÿ±Ÿà ÿßŸÜÿ¨ÿßŸÖ ÿ®ÿØŸá
            if (kline.x) {
                updateStrategy(symbol, closePrice);
            } else {
                // ÿ®ÿ±ÿß€å ÿßŸàŸÑ€åŸÜ ÿ®ÿßÿ± ⁄©Ÿá ÿØ€åÿ™ÿß ŸÖ€åÿßÿØÿå ÿ¢ÿ±ÿß€åŸá ÿ±Ÿà Ÿæÿ± ⁄©ŸÜ€åŸÖ ÿ™ÿß ŸÖŸÜÿ™ÿ∏ÿ± ÿ®ÿ≥ÿ™Ÿá ÿ¥ÿØŸÜ ŸÜŸÖŸàŸÜ€åŸÖ
                if (coinData[symbol].length === 0) {
                     // ÿß€åŸÜÿ¨ÿß €åŸá ⁄©ŸÑ⁄© ŸÖ€åÿ≤ŸÜ€åŸÖ: ⁄ÜŸàŸÜ ÿØ€åÿ™ÿß€å Ÿá€åÿ≥ÿ™Ÿàÿ±€å ŸÜÿØÿßÿ±€åŸÖÿå ÿµÿ®ÿ± ŸÖ€å⁄©ŸÜ€åŸÖ.
                     // ÿ®ÿ±ÿß€å ŸÜÿ≥ÿÆŸá ÿ≠ÿ±ŸÅŸá‚Äåÿß€å ÿ®ÿß€åÿØ Fetch History ÿ®ÿ≤ŸÜ€åŸÖ ⁄©Ÿá Ÿæÿß€å€åŸÜ ŸÜŸàÿ¥ÿ™ŸÖ.
                }
            }
        };

        // --- 3. FETCH HISTORY (ŸÖŸáŸÖ: Ÿæÿ± ⁄©ÿ±ÿØŸÜ ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿßŸàŸÑ€åŸá) ---
        // ⁄ÜŸàŸÜ Ÿàÿ®‚Äåÿ≥Ÿà⁄©ÿ™ ŸÅŸÇÿ∑ ÿØ€åÿ™ÿß€å ÿ¨ÿØ€åÿØ ŸÖ€åÿØŸáÿå ŸÖÿß €µ€∞ ÿ™ÿß ⁄©ŸÜÿØŸÑ ŸÇÿ®ŸÑ€å ÿ±Ÿà ŸÖ€åÿÆŸàÿß€åŸÖ ÿ®ÿ±ÿß€å RSI
        async function initHistory() {
            for (const sym of symbols) {
                try {
                    // ÿØÿ±€åÿßŸÅÿ™ €±€∞€∞ ⁄©ŸÜÿØŸÑ ÿ¢ÿÆÿ±
                    const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=${sym.toUpperCase()}&interval=1m&limit=60`);
                    const data = await res.json();
                    const closes = data.map(d => parseFloat(d[4])); // ŸÇ€åŸÖÿ™ ÿ®ÿ≥ÿ™Ÿá ÿ¥ÿØŸÜ
                    coinData[sym] = closes;
                    
                    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿßŸàŸÑ€åŸá
                    const lastPrice = closes[closes.length - 1];
                    runAnalysis(sym, lastPrice);
                } catch (e) {
                    console.log(`Error loading history for ${sym}. Need VPN?`);
                }
            }
        }
        initHistory(); // ÿßÿ¨ÿ±ÿß ÿØÿ± ÿ¥ÿ±Ÿàÿπ

        // --- 4. STRATEGY UPDATE ---
        function updateStrategy(symbol, price) {
            let history = coinData[symbol];
            history.push(price);
            if (history.length > 100) history.shift(); // ŸÅŸÇÿ∑ €±€∞€∞ ÿ™ÿß ŸÜ⁄ØŸá ÿØÿßÿ±
            
            runAnalysis(symbol, price);
        }

        function runAnalysis(symbol, currentPrice) {
            const history = coinData[symbol];
            if (history.length < 50) return; // ÿØ€åÿ™ÿß€å ⁄©ÿßŸÅ€å ŸÜ€åÿ≥ÿ™

            // 1. ŸÖÿ≠ÿßÿ≥ÿ®Ÿá RSI (14)
            const rsi = calculateRSI(history, 14);
            
            // 2. ŸÖÿ≠ÿßÿ≥ÿ®Ÿá EMA (50) - ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÖÿ™ÿ≠ÿ±⁄©
            const ema = calculateEMA(history, 50);

            // ÿ¢ŸæÿØ€åÿ™ UI
            const rsiEl = document.getElementById(`rsi-${symbol}`);
            const emaEl = document.getElementById(`ema-${symbol}`);
            const sigEl = document.getElementById(`sig-${symbol}`);
            const card = document.getElementById(`card-${symbol}`);

            rsiEl.innerText = rsi.toFixed(1);
            rsiEl.className = rsi > 70 ? 'val-high' : (rsi < 30 ? 'val-low' : '');
            
            const dist = ((currentPrice - ema) / ema) * 100;
            emaEl.innerText = dist.toFixed(2);

            // --- 5. SIGNAL LOGIC ---
            // ÿ±€åÿ≥ÿ™ ⁄©ÿ±ÿØŸÜ ⁄©ÿßÿ±ÿ™
            card.classList.remove('buy-active', 'sell-active');
            sigEl.innerText = "MONITORING";

            // ÿ≥€å⁄ØŸÜÿßŸÑ ÿÆÿ±€åÿØ: ÿ±ŸàŸÜÿØ ÿµÿπŸàÿØ€å (ŸÇ€åŸÖÿ™ ÿ®ÿßŸÑÿß€å EMA) + ÿßÿµŸÑÿßÿ≠ ŸÇ€åŸÖÿ™ (RSI Ÿæÿß€å€åŸÜ)
            if (currentPrice > ema && rsi < 35) {
                triggerSignal(symbol, 'BUY', currentPrice);
                card.classList.add('buy-active'); // ŸÖ€åÿßÿØ ÿ®ÿßŸÑÿß
                sigEl.innerText = "üîµ BUY SIGNAL";
            }
            // ÿ≥€å⁄ØŸÜÿßŸÑ ŸÅÿ±Ÿàÿ¥: ÿ±ŸàŸÜÿØ ŸÜÿ≤ŸàŸÑ€å (ŸÇ€åŸÖÿ™ ÿ≤€åÿ± EMA) + ÿ¨Ÿáÿ¥ ŸÇ€åŸÖÿ™ (RSI ÿ®ÿßŸÑÿß)
            else if (currentPrice < ema && rsi > 65) {
                triggerSignal(symbol, 'SELL', currentPrice);
                card.classList.add('sell-active'); // ŸÖ€åÿßÿØ ÿ®ÿßŸÑÿß
                sigEl.innerText = "üî¥ SELL SIGNAL";
            }
        }

        // --- 6. HELPERS ---
        function triggerSignal(symbol, type, price) {
            if(soundEnabled) document.getElementById('alertSound').play().catch(()=>{});
            
            const logBox = document.getElementById('logsContent');
            const time = new Date().toLocaleTimeString();
            const colorClass = type === 'BUY' ? 'log-buy' : 'log-sell';
            
            const entry = `<div class="log-entry ${colorClass}">[${time}] ${type} ${symbol.toUpperCase()} @ ${price}</div>`;
            logBox.innerHTML = entry + logBox.innerHTML;
        }

        function calculateRSI(prices, period) {
            let gains = 0, losses = 0;
            for (let i = prices.length - period; i < prices.length; i++) {
                const diff = prices[i] - prices[i - 1];
                if (diff >= 0) gains += diff;
                else losses -= diff;
            }
            const rs = gains / losses;
            return 100 - (100 / (1 + rs));
        }

        function calculateEMA(prices, period) {
            const k = 2 / (period + 1);
            let ema = prices[0];
            for (let i = 1; i < prices.length; i++) {
                ema = (prices[i] * k) + (ema * (1 - k));
            }
            return ema;
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            alert("Sound is now: " + (soundEnabled ? "ON" : "OFF"));
        }
    </script>
</body>
</html>
